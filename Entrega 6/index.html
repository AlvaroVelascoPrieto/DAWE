<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizador de Spritesheet</title>
<style>
    #canvasContainer {
        position: relative;
    }
    #spritesheetCanvas, #viewportCanvas {
        border: 1px solid black;
    }
</style>
</head>
<body>
<div id="canvasContainer">
    <canvas id="spritesheetCanvas" width="512" height="512"></canvas>
    <canvas id="viewportCanvas" width="128" height="128"></canvas>
</div>
<script>
    const spritesheetCanvas = document.getElementById('spritesheetCanvas');
    const spritesheetCtx = spritesheetCanvas.getContext('2d');
    const viewportCanvas = document.getElementById('viewportCanvas');
    const viewportCtx = viewportCanvas.getContext('2d');

    const spriteSheet = new Image();
    spriteSheet.src = 'spritesheet.png'; // Ruta de tu spritesheet

    const spriteSize = 32; // Tamaño de cada sprite en el spritesheet
    const viewportSize = 128; // Tamaño de la ventana deslizante
    let viewportX = 0; // Posición X inicial de la ventana
    let viewportY = 0; // Posición Y inicial de la ventana

    spriteSheet.onload = function() {
        drawSpritesheet();
        updateViewport();
    }

    function drawSpritesheet() {
        spritesheetCtx.drawImage(spriteSheet, 0, 0, spritesheetCanvas.width, spritesheetCanvas.height);
        // Dibujar la ventana en el spritesheet
        spritesheetCtx.strokeStyle = 'red';
        spritesheetCtx.strokeRect(viewportX, viewportY, viewportSize, viewportSize);
        // Mostrar la posición de la ventana
        spritesheetCtx.fillStyle = 'black';
        spritesheetCtx.font = '12px Arial';
        spritesheetCtx.fillText(`Ventana: (${viewportX},${viewportY})`, 10, 20);
    }

    function updateViewport() {
        viewportCtx.clearRect(0, 0, viewportCanvas.width, viewportCanvas.height);
        // Obtener el contenido dentro de la ventana en el spritesheet y mostrarlo en el canvas de la ventana
        const imageData = spritesheetCtx.getImageData(viewportX, viewportY, viewportSize, viewportSize);
        viewportCtx.putImageData(imageData, 0, 0);
    }

    document.addEventListener('keydown', function(event) {
        switch(event.key) {
            case 'ArrowLeft':
                viewportX = Math.max(0, viewportX - 5);
                break;
            case 'ArrowRight':
                viewportX = Math.min(spritesheetCanvas.width - viewportSize, viewportX + 5);
                break;
            case 'ArrowUp':
                viewportY = Math.max(0, viewportY - 5);
                break;
            case 'ArrowDown':
                viewportY = Math.min(spritesheetCanvas.height - viewportSize, viewportY + 5);
                break;
        }

        updateViewport();
        drawSpritesheet();
    });
</script>
</body>
</html>
